<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vademecum Web per Attività</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        display: flex;
    }
    .sidebar {
        width: 250px;
        background: #2c3e50;
        color: white;
        padding: 15px;
        height: 100vh;
        overflow-y: auto;
        position: fixed;
    }
    .sidebar h2 {
        font-size: 18px;
        margin-top: 0;
    }
    .sidebar a {
        display: block;
        color: white;
        padding: 8px;
        text-decoration: none;
        border-radius: 4px;
    }
    .sidebar a:hover {
        background: #34495e;
    }
    .content {
        margin-left: 260px;
        padding: 20px;
        flex: 1;
    }
    details {
        border: 1px solid #ccc;
        border-radius: 4px;
        padding: 10px;
        margin-bottom: 10px;
    }
    summary {
        cursor: pointer;
        font-weight: bold;
    }
    button.copy-btn {
        float: right;
        background: #3498db;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
    }
    button.copy-btn:hover {
        background: #2980b9;
    }
    mark {
        background-color: yellow;
        color: black;
    }
    input[type="text"] {
        width: 100%;
        padding: 6px;
        margin-bottom: 10px;
        border-radius: 4px;
        border: 1px solid #ccc;
    }
</style>
</head>
<body>

<div class="sidebar">
    <h2>Indice</h2>
    <input type="text" id="searchBox" placeholder="Cerca...">
    <nav id="menu"></nav>
</div>

<div class="content" id="mainContent">

    <details id="sec1">
        <summary>Procedura 1</summary>
        <button class="copy-btn" onclick="copySection('sec1')">Copia</button>
        <p>Questa è una procedura di esempio per attività da remoto.</p>
    </details>

    <details id="sec2">
        <summary>Procedura 2</summary>
        <button class="copy-btn" onclick="copySection('sec2')">Copia</button>
        <p>Questa sezione contiene istruzioni tecniche specifiche per la gestione delle connessioni.</p>
    </details>

    <details id="sec3">
        <summary>Procedura 3</summary>
        <button class="copy-btn" onclick="copySection('sec3')">Copia</button>
        <p>Guida alla risoluzione di problemi con stampanti di rete.</p>
    </details>

</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const detailsElements = document.querySelectorAll("details");
    const menu = document.getElementById("menu");

    detailsElements.forEach((detail, index) => {
        const summary = detail.querySelector("summary").innerText;
        const link = document.createElement("a");
        link.href = "#" + detail.id;
        link.textContent = summary;
        link.addEventListener("click", () => {
            detailsElements.forEach(d => d.removeAttribute("open"));
            detail.setAttribute("open", "");
            detail.scrollIntoView({ behavior: "smooth" });
        });
        menu.appendChild(link);
    });

    document.getElementById("searchBox").addEventListener("input", function() {
        const searchTerm = this.value.trim();
        const regex = new RegExp(searchTerm, "gi");

        document.querySelectorAll("details p, details summary").forEach(el => {
            el.innerHTML = el.textContent;
        });

        if (searchTerm) {
            document.querySelectorAll("details p, details summary").forEach(el => {
                el.innerHTML = el.textContent.replace(regex, match => `<mark>${match}</mark>`);
            });
        }
    });
});

function copySection(id) {
    const content = document.querySelector(`#${id}`).innerText;
    navigator.clipboard.writeText(content).then(() => {
        alert("Contenuto copiato!");
    });
}
</script>

</body>
</html>
